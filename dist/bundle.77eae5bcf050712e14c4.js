/*! For license information please see bundle.77eae5bcf050712e14c4.js.LICENSE.txt */
"use strict";(self.webpackChunkhospital_management_frontend=self.webpackChunkhospital_management_frontend||[]).push([[761],{1761(e,r,t){t.r(r),t.d(r,{default:()=>w});var n=t(6540),a=t(9210),i=t(322),o=t(816),c=t(8220),u=t(7548),s=t(4848);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach(function(r){d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function d(e,r,t){return(r=function(e){var r=function(e){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=l(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function m(){var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function i(t,n,a,i){var u=n&&n.prototype instanceof c?n:c,s=Object.create(u.prototype);return y(s,"_invoke",function(t,n,a){var i,c,u,s=0,l=a||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return i=r,c=0,u=e,p.n=t,o}};function d(t,n){for(c=t,u=n,r=0;!f&&s&&!a&&r<l.length;r++){var a,i=l[r],d=p.p,m=i[2];t>3?(a=m===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((a=t<2&&d<i[1])?(c=0,p.v=n,p.n=i[1]):d<m&&(a=t<3||i[0]>n||n>m)&&(i[4]=t,i[5]=n,p.n=m,c=0))}if(a||t>1)return o;throw f=!0,n}return function(a,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),c=l,u=m;(r=c<2?e:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(a="next"),r=i[a]){if(!(r=r.call(i,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,c<2&&(c=0)}else 1===c&&(r=i.return)&&r.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),c=1);i=e}else if((r=(f=p.n<0)?u:t.call(n,p))!==o)break}catch(r){i=e,c=1,u=r}finally{s=1}}return{value:r,done:f}}}(t,a,i),!0),s}var o={};function c(){}function u(){}function s(){}r=Object.getPrototypeOf;var l=[][n]?r(r([][n]())):(y(r={},n,function(){return this}),r),f=s.prototype=c.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,y(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,y(f,"constructor",s),y(s,"constructor",u),u.displayName="GeneratorFunction",y(s,a,"GeneratorFunction"),y(f),y(f,a,"Generator"),y(f,n,function(){return this}),y(f,"toString",function(){return"[object Generator]"}),(m=function(){return{w:i,m:p}})()}function y(e,r,t,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}y=function(e,r,t,n){function i(r,t){y(e,r,function(e){return this._invoke(r,t,e)})}r?a?a(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},y(e,r,t,n)}function v(e,r,t,n,a,i,o){try{var c=e[i](o),u=c.value}catch(e){return void t(e)}c.done?r(u):Promise.resolve(u).then(n,a)}function h(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var i=e.apply(r,t);function o(e){v(i,n,a,o,c,"next",e)}function c(e){v(i,n,a,o,c,"throw",e)}o(void 0)})}}function b(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i,o,c=[],u=!0,s=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=i.call(t)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(e){s=!0,a=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,r)||function(e,r){if(e){if("string"==typeof e)return x(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var j=["All","Unread"],g={APPOINTMENT:"primary",SYSTEM:"warning",ADMIN:"danger"};const w=function(){var e=(0,u.As)().user,r=b((0,n.useState)([]),2),t=r[0],l=r[1],f=b((0,n.useState)(!0),2),d=f[0],y=f[1],v=b((0,n.useState)("All"),2),x=v[0],w=v[1],O=function(){var e=h(m().m(function e(){var r,t;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,y(!0),"Unread"!==x){e.n=2;break}return e.n=1,a.nJ.getUnread();case 1:t=e.v,e.n=4;break;case 2:return e.n=3,a.nJ.getAll();case 3:t=e.v;case 4:l((null===(r=t.data)||void 0===r?void 0:r.data)||[]),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.p=6,y(!1),e.f(6);case 7:return e.a(2)}},e,null,[[0,5,6,7]])}));return function(){return e.apply(this,arguments)}}();(0,n.useEffect)(function(){O()},[x]);var N=t.filter(function(e){return!e.is_read}).length,S=function(){var e=h(m().m(function e(r){return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,a.nJ.markAsRead(r);case 1:l(function(e){return e.map(function(e){return e.id===r?p(p({},e),{},{is_read:!0}):e})}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(r){return e.apply(this,arguments)}}(),k=function(){var e=h(m().m(function e(){return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,a.nJ.markAllAsRead();case 1:l(function(e){return e.map(function(e){return p(p({},e),{},{is_read:!0})})}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=h(m().m(function e(r){return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,a.nJ.delete(r);case 1:l(function(e){return e.filter(function(e){return e.id!==r})}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(r){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,s.jsx)(c.A,{user:e}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(o.A,{title:"Notifications"}),(0,s.jsx)("main",{className:"p-6",children:(0,s.jsxs)("div",{className:"max-w-3xl space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Notifications"}),N>0&&(0,s.jsxs)(i.Ex,{variant:"primary",children:[N," unread"]})]}),N>0&&(0,s.jsx)(i.$n,{variant:"secondary",size:"sm",onClick:k,children:"Mark All as Read"})]}),(0,s.jsx)("div",{className:"flex gap-2 border-b border-gray-200",children:j.map(function(e){return(0,s.jsx)("button",{onClick:function(){return w(e)},className:"px-4 py-2 text-sm font-medium border-b-2 -mb-px transition-colors ".concat(x===e?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:e},e)})}),d?(0,s.jsx)(i.aH,{}):0===t.length?(0,s.jsx)(i.pp,{title:"No notifications",description:"Unread"===x?"You're all caught up!":"You have no notifications yet."}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(function(e){return(0,s.jsx)(i.Zp,{className:"relative ".concat(e.is_read?"":"bg-primary-50"),children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[!e.is_read&&(0,s.jsx)("span",{className:"mt-1 w-2 h-2 rounded-full bg-primary-600 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(i.Ex,{variant:g[e.type]||"default",children:e.type}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:(r=e.created_at,new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}))})]}),(0,s.jsx)("h3",{className:"font-medium text-gray-800",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-shrink-0",children:[!e.is_read&&(0,s.jsx)(i.$n,{size:"sm",variant:"secondary",onClick:function(){return S(e.id)},children:"Mark Read"}),(0,s.jsx)(i.$n,{size:"sm",variant:"danger",onClick:function(){return P(e.id)},children:"Delete"})]})]})},e.id);var r})})]})})]})]})}}}]);