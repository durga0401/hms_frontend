/*! For license information please see bundle.fe4e0a90ecdda7f43a8a.js.LICENSE.txt */
"use strict";(self.webpackChunkhospital_management_frontend=self.webpackChunkhospital_management_frontend||[]).push([[167],{9167(e,t,r){r.r(t),r.d(t,{default:()=>b});var n=r(6540),s=r(9210),a=r(322),i=r(816),c=r(8220),o=r(7548),l=r(4848);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e,t,r){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function a(r,n,s,a){var o=n&&n.prototype instanceof c?n:c,l=Object.create(o.prototype);return f(l,"_invoke",function(r,n,s){var a,c,o,l=0,u=s||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,c=0,o=e,p.n=r,i}};function m(r,n){for(c=r,o=n,t=0;!d&&l&&!s&&t<u.length;t++){var s,a=u[t],m=p.p,x=a[2];r>3?(s=x===n)&&(o=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((s=r<2&&m<a[1])?(c=0,p.v=n,p.n=a[1]):m<x&&(s=r<3||a[0]>n||n>x)&&(a[4]=r,a[5]=n,p.n=x,c=0))}if(s||r>1)return i;throw d=!0,n}return function(s,u,x){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,x),c=u,o=x;(t=c<2?e:o)||!d;){a||(c?c<3?(c>1&&(p.n=-1),m(c,o)):p.n=o:p.v=o);try{if(l=2,a){if(c||(s="next"),t=a[s]){if(!(t=t.call(a,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(o=TypeError("The iterator does not provide a '"+s+"' method"),c=1);a=e}else if((t=(d=p.n<0)?o:r.call(n,p))!==i)break}catch(t){a=e,c=1,o=t}finally{l=1}}return{value:t,done:d}}}(r,s,a),!0),l}var i={};function c(){}function o(){}function l(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(f(t={},n,function(){return this}),t),d=l.prototype=c.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,f(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e}return o.prototype=l,f(d,"constructor",l),f(l,"constructor",o),o.displayName="GeneratorFunction",f(l,s,"GeneratorFunction"),f(d),f(d,s,"Generator"),f(d,n,function(){return this}),f(d,"toString",function(){return"[object Generator]"}),(x=function(){return{w:a,m:p}})()}function f(e,t,r,n){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}f=function(e,t,r,n){function a(t,r){f(e,t,function(e){return this._invoke(t,r,e)})}t?s?s(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},f(e,t,r,n)}function h(e,t,r,n,s,a,i){try{var c=e[a](i),o=c.value}catch(e){return void r(e)}c.done?t(o):Promise.resolve(o).then(n,s)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){h(a,n,s,i,c,"next",e)}function c(e){h(a,n,s,i,c,"throw",e)}i(void 0)})}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,c=[],o=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);o=!0);}catch(e){l=!0,s=e}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw s}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var g={PENDING:"warning",CONFIRMED:"primary",COMPLETED:"success",CANCELLED:"danger"};const b=function(){var e=(0,o.As)().user,t=j((0,n.useState)([]),2),r=t[0],u=t[1],d=j((0,n.useState)(!0),2),m=d[0],f=d[1],h=j((0,n.useState)(""),2),v=h[0],b=h[1],N=j((0,n.useState)("active"),2),C=N[0],S=N[1],E=j((0,n.useState)(null),2),w=E[0],O=E[1],P=j((0,n.useState)(""),2),k=P[0],D=P[1],A=j((0,n.useState)(!1),2),L=A[0],_=A[1],T=j((0,n.useState)(null),2),F=T[0],M=T[1],I=j((0,n.useState)(null),2),G=I[0],$=I[1],R=j((0,n.useState)(""),2),U=R[0],q=R[1],z=j((0,n.useState)(!1),2),H=z[0],J=z[1],W=j((0,n.useState)(""),2),Y=W[0],Z=W[1],B=j((0,n.useState)(""),2),K=B[0],Q=B[1];(0,n.useEffect)(function(){V()},[]);var V=function(){var e=y(x().m(function e(){var t,r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,f(!0),e.n=1,s.qJ.getMyAppointments();case 1:r=e.v,u((null===(t=r.data)||void 0===t?void 0:t.data)||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,f(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),X=function(e){return e?e.includes("T")?e.split("T")[0]:e:""},ee=function(e){return e?new Date(X(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""},te=function(e){if(!e)return"";var t=j(e.split(":"),2),r=t[0],n=t[1],s=parseInt(r,10),a=s>=12?"PM":"AM";return"".concat(s%12||12,":").concat(n," ").concat(a)},re=r.filter(function(e){var t=!v||X(e.appointment_date)===v,r="active"===C?"PENDING"===e.status||"CONFIRMED"===e.status:"COMPLETED"===e.status||"CANCELLED"===e.status;return t&&r}),ne=function(){O(null),D("")},se=function(){var e=y(x().m(function e(){return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(w&&k){e.n=1;break}return e.a(2);case 1:return e.p=1,_(!0),e.n=2,s.qJ.updateAppointmentStatus(w.id,k);case 2:u(function(e){return e.map(function(e){return e.id===w.id?p(p({},e),{},{status:k}):e})}),ne(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,_(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),ae=function(){$(null),q(""),Z(""),Q("")},ie=function(){var e=y(x().m(function e(){var t,r,n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(G&&U.trim()){e.n=1;break}return Z("Prescription cannot be empty"),e.a(2);case 1:return e.p=1,J(!0),Z(""),e.n=2,s.qJ.addPrescription(G.id,U);case 2:t=e.v,u(function(e){return e.map(function(e){return e.id===G.id?p(p({},e),{},{prescription:U,status:"COMPLETED"}):e})}),Q(t.data.message||"Prescription saved successfully"),setTimeout(function(){ae()},1500),e.n=4;break;case 3:e.p=3,n=e.v,Z((null===(r=n.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)||"Failed to save prescription");case 4:return e.p=4,J(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,l.jsx)(c.A,{user:e}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(i.A,{title:"Appointments"}),(0,l.jsx)("main",{className:"p-6",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 border-b border-gray-200",children:[(0,l.jsx)("button",{onClick:function(){return S("active")},className:"pb-3 px-1 text-sm font-medium border-b-2 transition-colors ".concat("active"===C?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Active"}),(0,l.jsx)("button",{onClick:function(){return S("history")},className:"pb-3 px-1 text-sm font-medium border-b-2 transition-colors ".concat("history"===C?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"History"})]}),(0,l.jsx)(a.Zp,{children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Date"}),(0,l.jsx)("input",{type:"date",value:v,onChange:function(e){return b(e.target.value)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-200"})]}),v&&(0,l.jsx)(a.$n,{variant:"secondary",onClick:function(){return b("")},children:"Clear Filter"})]})}),m?(0,l.jsx)(a.aH,{}):0===re.length?(0,l.jsx)(a.pp,{title:"active"===C?"No active appointments":"No appointment history",description:"active"===C?"You don't have any pending or confirmed appointments.":"You don't have any completed or cancelled appointments yet."}):(0,l.jsx)(a.Zp,{children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600 w-10"}),(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Patient"}),(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Date"}),(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Time"}),(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Status"}),(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:re.map(function(e){return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)("button",{onClick:function(){return t=e.id,void M(F===t?null:t);var t},className:"p-1 rounded-md hover:bg-gray-200 transition-colors",title:F===e.id?"Hide details":"Show details",children:(0,l.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform ".concat(F===e.id?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}),(0,l.jsx)("td",{className:"py-3 px-4 text-sm text-gray-800",children:e.patient_name||"Patient"}),(0,l.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:ee(e.appointment_date)}),(0,l.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:te(e.appointment_time)}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)(a.Ex,{variant:g[e.status]||"default",children:e.status})}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:["CANCELLED"!==e.status&&(0,l.jsx)(a.$n,{size:"sm",variant:e.prescription?"secondary":"primary",onClick:function(){return function(e){$(e),q(e.prescription||""),Z(""),Q("")}(e)},children:e.prescription?"Edit Rx":"Write Rx"}),"COMPLETED"!==e.status&&"CANCELLED"!==e.status&&(0,l.jsx)(a.$n,{size:"sm",variant:"secondary",onClick:function(){return function(e){O(e),D(e.status)}(e)},children:"Update Status"}),"CANCELLED"===e.status&&(0,l.jsx)("span",{className:"text-sm text-gray-400 italic",children:"Cancelled"})]})})]}),F===e.id&&(0,l.jsx)("tr",{className:"bg-gray-50",children:(0,l.jsx)("td",{colSpan:6,className:"py-4 px-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Appointment ID"}),(0,l.jsxs)("p",{className:"text-sm text-gray-800",children:["#",e.id]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Patient"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:e.patient_name||"Patient"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:e.patient_email||"â€”"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Phone"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:e.patient_phone||"â€”"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:ee(e.appointment_date)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Time"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:te(e.appointment_time)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:e.status})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Reason"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:e.reason||"â€”"})]}),e.prescription&&(0,l.jsxs)("div",{className:"col-span-2 md:col-span-4",children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Prescription"}),(0,l.jsx)("p",{className:"text-sm text-gray-800 whitespace-pre-wrap bg-white p-3 rounded border border-gray-200 mt-1",children:e.prescription})]}),e.notes&&(0,l.jsxs)("div",{className:"col-span-2 md:col-span-4",children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Notes"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:e.notes})]})]})})},"".concat(e.id,"-details"))]},e.id)})})]})})})]})})]}),(0,l.jsx)(a.aF,{isOpen:!!w,onClose:ne,title:"Update Appointment Status",children:w&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(a.l6,{label:"New Status",value:k,onChange:function(e){return D(e.target.value)},options:[{value:"PENDING",label:"Pending"},{value:"CONFIRMED",label:"Confirmed"},{value:"COMPLETED",label:"Completed"},{value:"CANCELLED",label:"Cancelled"}]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Current Status:"}),(0,l.jsx)(a.Ex,{variant:g[w.status]||"default",children:w.status})]}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsx)(a.$n,{variant:"secondary",onClick:ne,children:"Cancel"}),(0,l.jsx)(a.$n,{onClick:se,loading:L,disabled:k===w.status,children:"Update"})]})]})}),(0,l.jsx)(a.aF,{isOpen:!!G,onClose:ae,title:null!=G&&G.prescription?"Edit Prescription":"Write Prescription",children:G&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Patient"}),(0,l.jsx)("p",{className:"text-sm font-medium text-gray-800",children:G.patient_name})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:ee(G.appointment_date)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Reason"}),(0,l.jsx)("p",{className:"text-sm text-gray-800",children:G.reason||"â€”"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,l.jsx)(a.Ex,{variant:g[G.status]||"default",children:G.status})]})]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prescription"}),(0,l.jsx)("textarea",{value:U,onChange:function(e){return q(e.target.value)},placeholder:"Enter prescription details: medications, dosage, instructions...",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"})]}),"COMPLETED"!==G.status&&(0,l.jsxs)("p",{className:"text-sm text-blue-600 bg-blue-50 p-3 rounded-lg",children:["ðŸ’¡ Saving the prescription will automatically mark this appointment as ",(0,l.jsx)("strong",{children:"Completed"}),"."]}),Y&&(0,l.jsx)(a.Fc,{variant:"error",children:Y}),K&&(0,l.jsx)(a.Fc,{variant:"success",children:K}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsx)(a.$n,{variant:"secondary",onClick:ae,children:"Cancel"}),(0,l.jsx)(a.$n,{onClick:ie,loading:H,disabled:!U.trim(),children:G.prescription?"Update Prescription":"Save & Complete"})]})]})})]})}}}]);