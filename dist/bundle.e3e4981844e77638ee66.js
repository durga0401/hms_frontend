/*! For license information please see bundle.e3e4981844e77638ee66.js.LICENSE.txt */
"use strict";(self.webpackChunkhospital_management_frontend=self.webpackChunkhospital_management_frontend||[]).push([[683],{8683(t,e,n){n.r(e),n.d(e,{default:()=>h});var r=n(6540),a=n(9210),i=n(322),o=n(816),s=n(8220),c=n(7548),l=n(4848);function u(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return p(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,s=0,c=t,f.n=n,o}};function d(n,r){for(s=n,c=r,e=0;!p&&l&&!a&&e<u.length;e++){var a,i=u[e],d=f.p,m=i[2];n>3?(a=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=d&&((a=n<2&&d<i[1])?(s=0,f.v=r,f.n=i[1]):d<m&&(a=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,f.n=m,s=0))}if(a||n>1)return o;throw p=!0,r}return function(a,u,m){if(l>1)throw TypeError("Generator is already running");for(p&&1===u&&d(u,m),s=u,c=m;(e=s<2?t:c)||!p;){i||(s?s<3?(s>1&&(f.n=-1),d(s,c)):f.n=c:f.v=c);try{if(l=2,i){if(s||(a="next"),e=i[a]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=t}else if((e=(p=f.n<0)?c:n.call(r,f))!==o)break}catch(e){i=t,s=1,c=e}finally{l=1}}return{value:e,done:p}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(p(e={},r,function(){return this}),e),d=l.prototype=s.prototype=Object.create(f);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,p(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=l,p(d,"constructor",l),p(l,"constructor",c),c.displayName="GeneratorFunction",p(l,a,"GeneratorFunction"),p(d),p(d,a,"Generator"),p(d,r,function(){return this}),p(d,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m}})()}function p(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}p=function(t,e,n,r){function i(e,n){p(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},p(t,e,n,r)}function f(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,a=t}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const h=function(){var t=(0,c.As)().user,e=d((0,r.useState)([]),2),n=e[0],p=e[1],m=d((0,r.useState)(!0),2),h=m[0],y=m[1],x=d((0,r.useState)(""),2),v=x[0],b=x[1];(0,r.useEffect)(function(){j()},[]);var j=function(){var t,e=(t=u().m(function t(){var e,n;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,y(!0),t.n=1,a.qJ.getMyAppointments();case 1:n=t.v,p((null===(e=n.data)||void 0===e?void 0:e.data)||[]),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.p=3,y(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}),function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){f(i,r,a,o,s,"next",t)}function s(t){f(i,r,a,o,s,"throw",t)}o(void 0)})});return function(){return e.apply(this,arguments)}}(),g=new Map;n.forEach(function(t){if(t.patient_id&&!g.has(t.patient_id)&&g.set(t.patient_id,{id:t.patient_id,name:t.patient_name||"Patient",email:t.patient_email||"",phone:t.patient_phone||"",appointmentCount:0,lastVisit:null}),t.patient_id){var e,n=g.get(t.patient_id);n.appointmentCount+=1;var r=null!==(e=t.appointment_date)&&void 0!==e&&e.includes("T")?t.appointment_date.split("T")[0]:t.appointment_date;(!n.lastVisit||r>n.lastVisit)&&(n.lastVisit=r)}});var w=Array.from(g.values()).filter(function(t){return t.name.toLowerCase().includes(v.toLowerCase())});return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,l.jsx)(s.A,{user:t}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(o.A,{title:"Patients"}),(0,l.jsx)("main",{className:"p-6",children:(0,l.jsxs)("div",{className:"max-w-4xl space-y-6",children:[(0,l.jsx)(i.Zp,{children:(0,l.jsx)(i.pd,{placeholder:"Search patients by name...",value:v,onChange:function(t){return b(t.target.value)}})}),h?(0,l.jsx)(i.aH,{}):0===w.length?(0,l.jsx)(i.pp,{title:"No patients found",description:v?"No patients match your search.":"You have no patients with appointments yet."}):(0,l.jsx)(i.Zp,{children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Patient"}),(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Contact"}),(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Appointments"}),(0,l.jsx)("th",{className:"py-3 px-4 text-sm font-semibold text-gray-600",children:"Last Visit"})]})}),(0,l.jsx)("tbody",{children:w.map(function(t){return(0,l.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-9 h-9 rounded-full bg-primary-100 text-primary-700 flex items-center justify-center font-semibold",children:(t.name[0]||"P").toUpperCase()}),(0,l.jsx)("span",{className:"font-medium text-gray-800",children:t.name})]})}),(0,l.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:t.email||t.phone||"—"}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)(i.Ex,{variant:"primary",children:t.appointmentCount})}),(0,l.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:(e=t.lastVisit,e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"—")})]},t.id);var e})})]})})})]})})]})]})}}}]);